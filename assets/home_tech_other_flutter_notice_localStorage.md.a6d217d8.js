import{_ as s,c as n,o as a,a as l}from"./app.75c5b203.js";const b=JSON.parse('{"title":"flutter \u5DF2\u672A\u8BFB\u6D88\u606F\u5B58\u672C\u5730","description":"","frontmatter":{"title":"flutter \u5DF2\u672A\u8BFB\u6D88\u606F\u5B58\u672C\u5730","layout":"doc"},"headers":[{"level":2,"title":"\u5217\u8868\u9875","slug":"\u5217\u8868\u9875","link":"#\u5217\u8868\u9875","children":[]},{"level":2,"title":"\u8BE6\u60C5\u9875","slug":"\u8BE6\u60C5\u9875","link":"#\u8BE6\u60C5\u9875","children":[]}],"relativePath":"home/tech_other/flutter_notice_localStorage.md","lastUpdated":1687421958000}'),p={name:"home/tech_other/flutter_notice_localStorage.md"},e=l(`<h1 id="flutter-\u5DF2\u672A\u8BFB\u6D88\u606F\u5B58\u672C\u5730" tabindex="-1">flutter \u5DF2\u672A\u8BFB\u6D88\u606F\u5B58\u672C\u5730 <a class="header-anchor" href="#flutter-\u5DF2\u672A\u8BFB\u6D88\u606F\u5B58\u672C\u5730" aria-hidden="true">#</a></h1><h2 id="\u5217\u8868\u9875" tabindex="-1">\u5217\u8868\u9875 <a class="header-anchor" href="#\u5217\u8868\u9875" aria-hidden="true">#</a></h2><p><code>logic.dart</code> :</p><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#61AFEF;">updateState</span><span style="color:#ABB2BF;">(id){</span></span>
<span class="line"><span style="color:#ABB2BF;">    state.list.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((element) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (element[</span><span style="color:#98C379;">&#39;id&#39;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> id) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        element[</span><span style="color:#98C379;">&#39;read&#39;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;"> }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>view.dart</code> :</p><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">GestureDetector</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">    behavior</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">HitTestBehavior</span><span style="color:#ABB2BF;">.opaque,</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#7F848E;">// \u70B9\u51FB\u624B\u52BF\uFF1A</span></span>
<span class="line"><span style="color:#ABB2BF;">    onTap</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#7F848E;">// \u4F20\u5230\u8BE6\u60C5\u9875\u7684\u8BF7\u6C42\u53C2\u6570\uFF1A</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">dynamic</span><span style="color:#ABB2BF;">&gt; parameters </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#ABB2BF;">      parameters[</span><span style="color:#98C379;">&quot;page&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;message&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      parameters[</span><span style="color:#98C379;">&quot;relatedId&quot;</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> state.list[index][</span><span style="color:#98C379;">&quot;id&quot;</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#7F848E;">// async await \u5F02\u6B65\uFF1A</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> data </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Get</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toNamed</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/noticeDetail&quot;</span><span style="color:#ABB2BF;">, arguments</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> parameters);</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#7F848E;">// data\u4E3A\u5B50\u9875\u9762\u5DF2\u8BFB\u8BF7\u6C42\u7684\u56DE\u8C03\u7ED3\u679C</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(data){</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#7F848E;">// \u5982\u679C\u6210\u529F\uFF0Ccall\u51FD\u6570\uFF0C\u6539\u5199\u72B6\u6001</span></span>
<span class="line"><span style="color:#ABB2BF;">        logic.</span><span style="color:#61AFEF;">updateState</span><span style="color:#ABB2BF;">(state.list[index][</span><span style="color:#98C379;">&quot;id&quot;</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">	...</span></span>
<span class="line"><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="\u8BE6\u60C5\u9875" tabindex="-1">\u8BE6\u60C5\u9875 <a class="header-anchor" href="#\u8BE6\u60C5\u9875" aria-hidden="true">#</a></h2><p><code>notice_detail/logic.dart</code></p><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#61AFEF;">readNotice</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  state.signUrl </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">OkApi</span><span style="color:#ABB2BF;">.shared.</span><span style="color:#61AFEF;">readNotice</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">ReadNotice</span><span style="color:#ABB2BF;">(state.noticeId , state.signUrl)).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((res) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (res.code </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">200</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#7F848E;">// \u6539\u5199isRead \u72B6\u6001</span></span>
<span class="line"><span style="color:#ABB2BF;">      state.isRead </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      state.isRead </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Global</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">showToast</span><span style="color:#ABB2BF;">(res.msg);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>notice_detail/view.dart</code></p><div class="language-dart line-numbers-mode"><button class="copy"></button><span class="lang">dart</span><pre><code><span class="line"><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#7F848E;">// WillPopScope\u7EC4\u4EF6\uFF0C\u76D1\u542C\u8FD4\u56DE\u4E8B\u4EF6</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">WillPopScope</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      onWillPop</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;\u8FD4\u56DE\u952E\u70B9\u51FB\u4E86&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#7F848E;">// \u5C06isRead\u56DE\u4F20</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Get</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">back</span><span style="color:#ABB2BF;">(result</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> state.isRead);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Future</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">value</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#7F848E;">//...</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,11),o=[e];function r(t,c,B,i,y,F){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{b as __pageData,u as default};
