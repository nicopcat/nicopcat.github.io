import{_ as s,c as n,o as a,a as l}from"./app.3250da91.js";const A=JSON.parse('{"title":"7 - View Engines","description":"","frontmatter":{"layout":"doc","title":"7 - View Engines"},"headers":[{"level":2,"title":"EJS","slug":"ejs","link":"#ejs","children":[{"level":3,"title":"\u5B89\u88C5","slug":"\u5B89\u88C5","link":"#\u5B89\u88C5","children":[]},{"level":3,"title":"\u4F7F\u7528","slug":"\u4F7F\u7528","link":"#\u4F7F\u7528","children":[]}]},{"level":2,"title":"Passing Data Into Views","slug":"passing-data-into-views","link":"#passing-data-into-views","children":[]},{"level":2,"title":"Partials","slug":"partials","link":"#partials","children":[]}],"relativePath":"home/BACKEND/Node.js/07_View_Engines.md","lastUpdated":1690775236000}'),p={name:"home/BACKEND/Node.js/07_View_Engines.md"},e=l(`<h1 id="_7-view-engines" tabindex="-1">7 - View Engines <a class="header-anchor" href="#_7-view-engines" aria-hidden="true">#</a></h1><blockquote><p>Node js view engine is like Blade in Laravel. The most basic definition is that the view engine is a tool that helps us write HTML code and reuse it in a shorter and simpler way than usual. In addition, it can import data from the server side and render the final HTML.</p></blockquote><p>Something just like HTML with a slight difference ?</p><h2 id="ejs" tabindex="-1">EJS <a class="header-anchor" href="#ejs" aria-hidden="true">#</a></h2><blockquote><p>EJS\uFF08Embedded JavaScript\uFF09\u662F\u4E00\u79CD\u5D4C\u5165\u5F0F JavaScript \u6A21\u677F\u5F15\u64CE\uFF0C\u53EF\u7528\u4E8E\u751F\u6210 HTML\u3001XML\u3001JSON \u7B49\u6587\u6863\u3002\u5B83\u5141\u8BB8\u60A8\u5728\u6A21\u677F\u4E2D\u4F7F\u7528 JavaScript \u4EE3\u7801\uFF0C\u4EE5\u4FBF\u52A8\u6001\u751F\u6210\u5185\u5BB9\u3002</p><p>EJS \u7684\u6A21\u677F\u7C7B\u4F3C\u4E8E\u5E38\u89C4 HTML \u6587\u4EF6\uFF0C\u4F46\u5305\u542B\u7279\u6B8A\u7684\u6807\u8BB0\uFF08\u4F8B\u5982 &lt;% %&gt; \u548C &lt;%= %&gt;\uFF09\uFF0C\u7528\u4E8E\u63D2\u5165 JavaScript \u4EE3\u7801\u548C\u53D8\u91CF\u3002\u8FD9\u4E9B\u6807\u8BB0\u5141\u8BB8\u60A8\u52A8\u6001\u751F\u6210 HTML \u5185\u5BB9\uFF0C\u4F8B\u5982\u6839\u636E\u7528\u6237\u8F93\u5165\u751F\u6210\u8868\u5355\u3001\u6839\u636E\u6570\u636E\u96C6\u751F\u6210\u5217\u8868\u7B49\u3002 \u2014\u2014ChatGPT Turbo 3.5</p></blockquote><h3 id="\u5B89\u88C5" tabindex="-1">\u5B89\u88C5 <a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a></h3><div class="language-shellscript line-numbers-mode"><button class="copy"></button><span class="lang">shellscript</span><pre><code><span class="line"><span style="color:#ABB2BF;">npm i ejs</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="\u4F7F\u7528" tabindex="-1">\u4F7F\u7528 <a class="header-anchor" href="#\u4F7F\u7528" aria-hidden="true">#</a></h3><p>\u5728app.js\u4E2D\uFF0C\u6CE8\u518Cejs:</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;view engine&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&#39;ejs&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ejs\u6587\u4EF6\u548CHTML\u51E0\u4E4E\u4E00\u6837\uFF0C\u4F46\u5B83\u53EF\u4EE5\u52A8\u6001\u63D2\u5165\u4EE3\u7801\u548C\u53D8\u91CF\u3002</p><p>\u4F7F\u7528<code>render()</code>\u65B9\u6CD5\u6E32\u67D3\uFF1A</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;index&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="passing-data-into-views" tabindex="-1">Passing Data Into Views <a class="header-anchor" href="#passing-data-into-views" aria-hidden="true">#</a></h2><p>\u4F7F\u7528 <code>&lt;% %&gt;</code> \u6216<code> &lt;%= %&gt;</code>\u63D2\u5165JavaScript\u8BED\u53E5\uFF1A</p><div class="language-html line-numbers-mode"><button class="copy"></button><span class="lang">html</span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">meta</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">charset</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">meta</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">http-equiv</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;X-UA-Compatible&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;IE=edge&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">meta</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;viewport&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">content</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;width=device-width, initial-scale=1.0&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Nic\u90E8\u843D\u683C | </span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">%= title %&gt;&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u53D8\u91CF<code>title</code>\u4ECE\u54EA\u91CC\u53D6\u7684\uFF1F\u56DE\u5230app.js:</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;index&#39;</span><span style="color:#ABB2BF;">,{</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;HomePage&#39;</span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u6240\u4EE5\uFF0C\u53D8\u91CF\u4ECErender\u8FD9\u4E2A\u9875\u9762\u7684js\u6587\u4EF6\u5B9A\u4E49\uFF0C\u7136\u540E\u4F20\u9012\u5230ejs\u9875\u9762\uFF0C\u6E32\u67D3\u51FA\u6765\u3002</p><p>\u5047\u8BBE\u6709\u4E00\u4E9B\u535A\u6587\u53D8\u91CF<code>blogs</code>\uFF0C\u6211\u4EEC\u73B0\u5728\u8981\u628A\u5B83\u4F20\u5230\u524D\u53F0\u6E32\u67D3\u51FA\u6765\uFF1A</p><div class="language-js line-numbers-mode"><button class="copy"></button><span class="lang">js</span><pre><code><span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;/&#39;</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;">req</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">res</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">blogs</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;\u73A9\u73A9Node.js&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;\u597D\u597D\u73A9\u597D\u597D\u73A9\u597D\u597D\u73A9&#39;</span><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;\u4E1C\u95E8\u6C99\u89D2&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;\u597D\u597D\u73A9\u597D\u597D\u73A9\u597D\u597D\u73A9&#39;</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;\u5929\u6C14&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">content</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;\u4ECA\u5929\u5929\u6C14\u4E0D\u9519\uFF0C\u4F46\u4E0B\u5348\u53C8\u70ED\u4E86\u8D77\u6765&#39;</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  ]</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">res</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;index&#39;</span><span style="color:#ABB2BF;">,{</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;HomePage&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">blogs</span><span style="color:#ABB2BF;">:</span><span style="color:#E06C75;">blogs</span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>index.ejs:</p><div class="language-html line-numbers-mode"><button class="copy"></button><span class="lang">html</span><pre><code><span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;All Blogs&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">% if(blogs.length &gt; 0) { %&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">% blogs.forEach(x=&gt;{%&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;post&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">h3</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">%=x.title  %&gt; &lt;/</span><span style="color:#E06C75;">h3</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">%=x.content  %&gt;&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">% }) %&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">% } else {%&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;opps, \u4E00\u7247\u8352\u829C ..&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">% }%&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u8FD9\u5C31\u662F\u6240\u8C13\u7684 SSR(Server-Side Render)\uFF01\u62BD\u5230\u4E86\uFF01</p><p>\u4E0D\u7981\u731C\u60F3\uFF0Cnuxt.js \u548C next.js \u5E94\u8BE5\u6BD4\u8FD9 ejs \u597D\u5199\uFF0C\u6BD5\u7ADF\u548C\u524D\u7AEF\u6846\u67B6\u7D27\u5BC6\u7ED3\u5408\u3002</p><h2 id="partials" tabindex="-1">Partials <a class="header-anchor" href="#partials" aria-hidden="true">#</a></h2><p>Wait, <code>partials</code>??? \u8D8A\u6765\u8D8A\u50CF\u5728dealing with\u6211\u4EB2\u7231\u7684\u535A\u5BA2\u6846\u67B6Hugo\u4E86\u3002</p><p>\u50CF\u4E0A\u9762Navbar\uFF0C\u51E0\u4E4E\u6BCF\u4E2A\u9875\u9762\u90FD\u8981\u6709\u7528\uFF0C\u4E00\u65E6\u9700\u8981\u66F4\u65B0\u5B83\uFF0C\u5C31\u8DD1\u5230\u6240\u6709\u9875\u9762\u8FDB\u884C\u66F4\u6362\uFF0C\u8D39\u65F6\u8D39\u529B\uFF0C\u4E0D\u592A\u806A\u660E\u3002</p><p>\u6240\u4EE5\uFF0C\u82E5\u662F\u9875\u9762\u4E2D\u6709\u516C\u7528\u7684\u7EC4\u4EF6\uFF0C\u6700\u597D\u5C06\u5B83\u62BD\u51FA\u5230partials\uFF0C\u65B9\u4FBF\u7EDF\u4E00\u4FEE\u6539\u3002</p><hr><p><strong>\u65B0\u5EFApatials\u6587\u4EF6\u5939</strong> \u9996\u5148\uFF0C\u5728views\u4E0B\u65B0\u5EFA\u6587\u4EF6\u5939partials\uFF0C\u5728\u5176\u4E2D\u65B0\u5EFAnav.ejs\u3002</p><p>\u5C06\u4E4B\u524D\u5199\u5728index.ejs\u4E2D\u7684nav\u4EE3\u7801\u62F7\u8D1D\u5230nav.ejs\u4E2D\u3002</p><p><strong>\u5F15\u7528</strong></p><div class="language-html line-numbers-mode"><button class="copy"></button><span class="lang">html</span><pre><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Home Page&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#FFFFFF;">&lt;</span><span style="color:#ABB2BF;">%- include(&#39;./partials/nav.ejs&#39;) %&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">br</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  ...</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>`,34),o=[e];function t(r,c,B,i,y,F){return a(),n("div",null,o)}const b=s(p,[["render",t]]);export{A as __pageData,b as default};
